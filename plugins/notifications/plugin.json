{
  "name": "notifications",
  "version": "1.0.0",
  "description": "Multi-channel notifications (email, push, SMS) with templates, preferences, and delivery tracking",
  "author": "nself",
  "license": "Source-Available",
  "homepage": "https://github.com/acamarata/nself-plugins/tree/main/plugins/notifications",
  "repository": "https://github.com/acamarata/nself-plugins",
  "minNselfVersion": "0.4.8",
  "category": "infrastructure",
  "tags": ["notifications", "email", "push", "sms", "messaging", "alerts", "templates"],

  "tables": [
    "notification_templates",
    "notification_preferences",
    "notification_messages",
    "notification_queue",
    "notification_providers",
    "notification_batches"
  ],

  "webhooks": {
    "delivery.succeeded": "Notification delivered successfully",
    "delivery.failed": "Notification delivery failed",
    "bounce": "Email bounced",
    "complaint": "Email marked as spam",
    "open": "Email opened",
    "click": "Email link clicked",
    "unsubscribe": "User unsubscribed from notifications"
  },

  "actions": {
    "init": "Initialize notification system",
    "server": "Start notification server",
    "worker": "Start background worker for queue processing",
    "template": "Manage notification templates",
    "test": "Send test notifications",
    "stats": "View notification statistics"
  },

  "envVars": {
    "required": [],
    "optional": [
      "NOTIFICATIONS_EMAIL_PROVIDER",
      "NOTIFICATIONS_EMAIL_API_KEY",
      "NOTIFICATIONS_EMAIL_FROM",
      "NOTIFICATIONS_PUSH_PROVIDER",
      "NOTIFICATIONS_PUSH_API_KEY",
      "NOTIFICATIONS_SMS_PROVIDER",
      "NOTIFICATIONS_SMS_ACCOUNT_SID",
      "NOTIFICATIONS_SMS_AUTH_TOKEN",
      "NOTIFICATIONS_SMS_FROM",
      "NOTIFICATIONS_QUEUE_BACKEND",
      "NOTIFICATIONS_BATCH_INTERVAL",
      "NOTIFICATIONS_RETRY_ATTEMPTS",
      "NOTIFICATIONS_RETRY_DELAY"
    ]
  },

  "config": {
    "port": 3102,
    "webhookPath": "/webhooks/notifications",
    "queueBackend": "redis",
    "batchInterval": 86400,
    "retryAttempts": 3,
    "retryDelay": 1000,
    "maxRetryDelay": 300000,
    "rateLimits": {
      "email": {
        "perUser": 100,
        "window": 3600
      },
      "push": {
        "perUser": 200,
        "window": 3600
      },
      "sms": {
        "perUser": 20,
        "window": 3600
      }
    }
  },

  "hooks": {
    "postInstall": "install.sh",
    "preUninstall": "uninstall.sh",
    "postSync": null
  },

  "permissions": {
    "database": ["create", "read", "update", "delete"],
    "network": ["*"],
    "filesystem": ["logs", "cache", "templates"]
  }
}
