{
  "name": "realtime",
  "version": "1.0.0",
  "description": "Socket.io real-time server with presence tracking, typing indicators, and room management",
  "author": "nself",
  "license": "Source-Available",
  "homepage": "https://github.com/acamarata/nself-plugins/tree/main/plugins/realtime",
  "repository": "https://github.com/acamarata/nself-plugins",
  "minNselfVersion": "0.4.8",
  "category": "infrastructure",
  "tags": ["realtime", "websocket", "socket.io", "presence", "chat", "notifications"],

  "tables": [
    "realtime_connections",
    "realtime_rooms",
    "realtime_room_members",
    "realtime_presence",
    "realtime_typing",
    "realtime_events"
  ],

  "cliCommands": [
    {"name": "init", "description": "Initialize realtime server and database schema"},
    {"name": "server", "description": "Start the Socket.io realtime server"},
    {"name": "status", "description": "Show server status and statistics"},
    {"name": "rooms", "description": "Manage rooms and memberships"},
    {"name": "connections", "description": "View active connections"},
    {"name": "presence", "description": "View user presence states"}
  ],

  "envVars": [
    {"name": "REALTIME_REDIS_URL", "required": true, "description": "Redis connection URL for pub/sub"},
    {"name": "REALTIME_CORS_ORIGIN", "required": true, "description": "Allowed CORS origins (comma-separated)"},
    {"name": "DATABASE_URL", "required": true, "description": "PostgreSQL connection string"},
    {"name": "REALTIME_PORT", "required": false, "default": "3101", "description": "Server port"},
    {"name": "REALTIME_MAX_CONNECTIONS", "required": false, "default": "10000", "description": "Maximum concurrent connections"},
    {"name": "REALTIME_PING_TIMEOUT", "required": false, "default": "60000", "description": "Ping timeout in milliseconds"},
    {"name": "REALTIME_PING_INTERVAL", "required": false, "default": "25000", "description": "Ping interval in milliseconds"},
    {"name": "REALTIME_JWT_SECRET", "required": false, "description": "JWT secret for authentication"},
    {"name": "REALTIME_ENABLE_PRESENCE", "required": false, "default": "true", "description": "Enable presence tracking"},
    {"name": "REALTIME_ENABLE_TYPING", "required": false, "default": "true", "description": "Enable typing indicators"},
    {"name": "REALTIME_TYPING_TIMEOUT", "required": false, "default": "3000", "description": "Typing indicator timeout in milliseconds"}
  ],

  "hooks": {
    "postInstall": "install.sh",
    "preUninstall": "uninstall.sh",
    "postSync": null
  },

  "permissions": {
    "database": ["create", "read", "update", "delete"],
    "network": ["*"],
    "filesystem": ["logs", "cache"]
  }
}
