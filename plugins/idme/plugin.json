{
  "name": "idme",
  "version": "1.0.0",
  "description": "ID.me OAuth authentication with government-grade identity verification for 7 groups",
  "author": "nself",
  "license": "Source-Available",
  "homepage": "https://github.com/acamarata/nself-plugins/tree/main/plugins/idme",
  "repository": "https://github.com/acamarata/nself-plugins",
  "minNselfVersion": "0.4.8",
  "category": "authentication",
  "tags": ["authentication", "oauth", "idme", "identity", "verification", "military", "veterans"],

  "tables": [
    "idme_verifications",
    "idme_groups",
    "idme_badges",
    "idme_attributes",
    "idme_webhook_events"
  ],

  "webhooks": {
    "verification.created": "New verification created",
    "verification.updated": "Verification status updated",
    "verification.completed": "Verification completed successfully",
    "verification.failed": "Verification failed",
    "group.verified": "User verified for a specific group",
    "group.revoked": "Group verification revoked",
    "attribute.updated": "User attribute updated"
  },

  "actions": {
    "init": "Initialize OAuth configuration",
    "verify": "Check verification status",
    "groups": "List verified groups",
    "test": "Test OAuth connection"
  },

  "envVars": {
    "required": [
      "IDME_CLIENT_ID",
      "IDME_CLIENT_SECRET",
      "IDME_REDIRECT_URI"
    ],
    "optional": [
      "IDME_SCOPES",
      "IDME_SANDBOX",
      "IDME_WEBHOOK_SECRET"
    ]
  },

  "config": {
    "apiVersion": "v3",
    "baseUrl": "https://api.id.me",
    "sandboxUrl": "https://api.idmelabs.com",
    "webhookPath": "/webhooks/idme",
    "defaultScopes": "openid,email,profile",
    "port": 3010
  },

  "hooks": {
    "postInstall": "install.sh",
    "preUninstall": "uninstall.sh"
  },

  "permissions": {
    "database": ["create", "read", "update", "delete"],
    "network": ["id.me", "idmelabs.com"],
    "filesystem": ["logs", "cache"]
  }
}
