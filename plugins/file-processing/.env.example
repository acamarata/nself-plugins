# File Processing Plugin Configuration
# Copy to .env and fill in your values

# =============================================================================
# Required
# =============================================================================

# Storage provider: minio, s3, gcs, r2, b2, azure
FILE_STORAGE_PROVIDER=minio

# Storage bucket/container name
FILE_STORAGE_BUCKET=files

# PostgreSQL connection string
DATABASE_URL=postgresql://user:password@localhost:5432/nself

# =============================================================================
# Storage Provider Configuration
# =============================================================================

# For MinIO or S3-compatible storage
FILE_STORAGE_ENDPOINT=http://localhost:9000
FILE_STORAGE_ACCESS_KEY=minioadmin
FILE_STORAGE_SECRET_KEY=minioadmin
FILE_STORAGE_REGION=us-east-1

# For AWS S3 (omit endpoint, use region)
# FILE_STORAGE_REGION=us-east-1
# FILE_STORAGE_ACCESS_KEY=your_aws_access_key
# FILE_STORAGE_SECRET_KEY=your_aws_secret_key

# For Google Cloud Storage
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json

# For Azure Blob Storage
# AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=...

# For Cloudflare R2
# FILE_STORAGE_ENDPOINT=https://[account-id].r2.cloudflarestorage.com
# FILE_STORAGE_ACCESS_KEY=your_r2_access_key
# FILE_STORAGE_SECRET_KEY=your_r2_secret_key

# For Backblaze B2
# FILE_STORAGE_ENDPOINT=https://s3.us-west-000.backblazeb2.com
# FILE_STORAGE_ACCESS_KEY=your_b2_key_id
# FILE_STORAGE_SECRET_KEY=your_b2_application_key

# =============================================================================
# Processing Options
# =============================================================================

# Thumbnail sizes (comma-separated widths in pixels)
FILE_THUMBNAIL_SIZES=100,400,1200

# Enable virus scanning (requires ClamAV)
FILE_ENABLE_VIRUS_SCAN=false

# Enable image optimization
FILE_ENABLE_OPTIMIZATION=true

# Maximum file size (in bytes, default 100MB)
FILE_MAX_SIZE=104857600

# Allowed file types (comma-separated MIME types, empty = all)
FILE_ALLOWED_TYPES=

# Strip EXIF metadata from images (for privacy)
FILE_STRIP_EXIF=true

# Queue concurrency (number of files to process simultaneously)
FILE_QUEUE_CONCURRENCY=3

# =============================================================================
# ClamAV Configuration (if virus scanning enabled)
# =============================================================================

# ClamAV daemon host
CLAMAV_HOST=localhost

# ClamAV daemon port
CLAMAV_PORT=3310

# =============================================================================
# Queue Configuration (requires Redis)
# =============================================================================

# Redis URL for BullMQ queue
REDIS_URL=redis://localhost:6379

# =============================================================================
# Server Configuration
# =============================================================================

# Server port (default: 3104)
PORT=3104

# Server host (default: 0.0.0.0)
HOST=0.0.0.0

# Log level: debug, info, warn, error (default: info)
LOG_LEVEL=info
